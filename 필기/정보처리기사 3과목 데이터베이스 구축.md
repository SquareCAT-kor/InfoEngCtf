# 정보처리기사 3과목 데이터베이스 구축

## 1장 논리 데이터베이스 설계

> 차수 degree  = 칼럼 수 , 속성 수 Attribute 수  , 세로 줄 수, 열 수 
>
> 카디널리티 Cardinality = 튜플 수 , 행 수 , 가로 줄 수 
>
> 관계 해석 VS 관계 대수 : Predicate Calculus 하면 관계 해석임.
>
> 도부이결다조 외우기

### 데이터베이스 설계 - 요구 개념 논리 물리 구현

* 사용자의 요구를 분석하여 컴퓨터에 저장할 수 있는 구조에 맞게 변형한 후, 특정 DBMS로 구현한다.
* 고려사항
  * 무결성 : CRUD 연산 후에도 정해진 제약 조건을 만족
  * 일관성 : 특정 질의에 대한 응답이 변해서는 안된다.
    * 독립성
  * 회복 : 장애 발생 시 장애 발생 직전 형태로 복구
  * 보안 : 불법적 데이터 노출이나 변경, 손실로 부터 보호
  * 효율성 : 응답시간 단축, 생산성 및 저장공간 최적화가 가능할 것
  * 확장 : DB에 영향을 주지 않으면서 지속적인 확장 가능
* 설계 순서 **(요구조건 - 모델링 - 인터페이스 설계 - 저장소 지정 - 구현 ) **
  1. 요구조건 분석 - 명세서  ( 요구 조건, 수행 업무는 무엇인지, 데이터 종류 용도 등)
  2. 개념적 설계 - E-R 모델 ,스키마 (개념 스키마 모델링 + 트랜섹션 모델링 . 개념 스키마 설계과정 ERD !!)
     * 독립적인 논리 스키마 (개념 스키마, 개념 설계)
     * 트랜섹션 **모델링** 단계 < 이거 자주나옴
  3. 논리적 설계 - 논리 스키마, 인터페이스 (논리적 자료 구조로 변환, 관계형 DB의 경우 테이블을 설계함. )
     * 종속적인 논리 스키마 설계 단계
     * 정규화 과정
     * 트랜섹션 인터페이스 설계
  4. 물리적 설계 - 물리적 구조의 데이터 (DB 저장 구조 및 액세스 경로 결정, 저장 형식, 순서 등 결정)
  5. 구현 - DDL 로 DB 생성 , 트랜섹션 작성 (빈 데이터베이스 생성 후 입력, 응용프로그램 작성 등.)
     * 트랜섹션 작성 단계

### 데이터 모델 - 구조 연산 제약조건 

* 데이터 모델 개념 : 현실 세계의 데이터 구조를 컴퓨터 세계의 데이터 구조로 기술하는 개념적 도구
* 구성 요소 
  * 논리적 데이터 구조 Structure - 개체(Entity) 타입과 개체 타입들 간의 관계
  * 연산 Operation - 데이터베이스 조작 기본 도구
  * 제약 조건 Constraints - 저장될 데이터의 논리적 제약 조건. (구조와 연산에대해서도 포함)
* Entity 개체 : 테이터베이스에서 표현하려는 것  - 컴퓨터 파일의 레코드에 대응.
  * 서로 연관된 속성(Attributes) 들로 구성.
  * 독립적으로 존재하거나 그 자체로 구별이 가능
  * 예시 : 테이블 이름 과 그 내용 - 개체 / 칼럼 - 속성 / 행 하나 - 개체 인스턴스
  * DFD (Data Flow Diagram) : 자료흐름도 를 통해 업무 분석 수행 시 **자료 저장소DS** 를 이용한다. (?)
  * BRP (Business Process Reengineering) : 업무 프로세스 재설계 시에는 관련 개체를 찾는다. (?) 
* Relationship 관계 : 개체 관의 속성 간의 논리적인 연결 , 관계
  * 관계 
    * 1:1 - 1대1 대응관계
    * 1:N - 1대다 관계
    * N:M  - 다대다 관계 
    * 종속 관계
    * 재귀 관계
    * 배타 AND 배타 OR 관계
    * 재귀 관계  - 자기 자신과 관계 = 순환 관계 
* Attribute 속성 : 데이터의 가장 작은 논리적 단위, 파일 구조상의 데이터 항목, 데이터 필드
  * 클래스 안의 속성 (객체 안의 속성) 등등의 뜻.
  * 기본키 , 외래키 , 일반 

### E-R 모델

> Entity - Relationship 

* 개요 : 개체와 개체 간의 관계를 표시
  * 1:1 , 1:N, N:M 
* E-R Diagram : 기호로 E-R 표현한 것.
* 피터 첸 표기법 : 사각형 마름모 타원 이중타원 등등 P.Chen = E-R
* 정보 공학 표기법 : | O < 등으로 표시한 것. 
* 바커 표기법 : 정보공학이랑 비슷한데, 속성도 표시해줌 (PK FK 일반 나눠서)
* 기호 정리
  * 사각형 = 개체
  * 마름모 = 관계 (다이아몬드)
  * 타원 = 속성
  * 이중 타원 = 다중속성 (복합속성)
  * 밑줄 타원 = 기본키 PK
  * 복수 타원 = 복합속성 ( 성명 = 성 + 이름)
  * 관계 = 선위에 1:1, 1:N, N:M 표시
  * 선 ,링크 = 개체 타입과 속성을 연결해줌
    * 필수 = 실선, 점선 = 선택적, 화살표(부등호) = 다중, O = 0
* 관계모델에서 Relation 릴레이션 = 테이블

### 관계형 데이터베이스 모델 RDBMS

* 튜플 
  * 테이블(릴레이션) 에서 각각의 행
  * 여러 속성(칼럼)으로 구성
  * ***튜플의 수 ? = Cardinality 행의 수 *** 카디널리티 또는 기수, 대응수 라고 부름
* 속성
  * 컬럼 , 가장 작은 논리적 단위
  * ***속성의 수 = Degree, 차수 열의 수 ***
* 도메인  = 도메인 무결성  - 속성범위 가 벗어나면 안된다.
  * 하나의 속성이 취할 수 있는 같은 타임의 원자값??? 들의 집합.
    * 속성에 부여할 수 있는 , 지정할 수 있는 값의 범위 
* 릴레이션 ( 테이블 ) 특징
  * 한 릴레이션에 똑같은 튜플이 포함될 수 없다.
  * 한 릴레이션 안의 튜플 사이에는 순서가 없다.
  * 삽입, 삭제 등의 작업이 가능하여 실시간으로 변한다.
  * 스키마를 구성할 경우 속성들 간의 순서는 중요하지 않다.
    * 칼럼 순서 안중요하다는 뜻
  * 속성 ( 칼럼) 값은 유일해야하지만, 이를 구성하는 값은 같을 수 있다.
    * 행안의 어떤 속성값이 다른 행의 속성값이랑 당연히 같을 수 있지.
  * 릴레이션을 구성하는 튜플을 유일하게 식별하려면 부분집합을 키로 설정한다.
  * 속성값은 더이상 세분화 할 수 없는 값만 저장

### 관계형 DB 제약 조건 (Key)

* 후보키 Candidate Key
  * 튜플을 유일하게 식별 (행을 유일하게 식별)하기 위해 사용하는 속성들의 부분 집합
  * 기본키로 사용할 수 있는 속성들 (유일성, 최소성)
* 기본키 Primary Key = 개체 무결성, 데이터 정확성 
  * 후보키의 성질을 가짐 ( 중복없음 , 최소성 = 유일하게 식별하는데 꼭 필요한 속성만 구성)
  * Not Null = 무결성 조건
* 대체키 Alternate Key
  * ***후보키가 여러개일 때 PK 빼고 나머지***
* 슈퍼키 Super Key
  * 한 릴레이션 내에 있는 속성들의 집합 ( = 여러개를 조합해서 만들 수도 있음)
  * 컬럼 여러개 집합
  * ***유일성은 만족시키지만 최소성은 만족시키지 않는다.***
* 외래키 Foreign Key = 참조 무결성
  * 다른 릴레이션(Table) 에서 참조할 수 있는 속성 또는 속성여러개집합
  * 한 릴레이션의 속성 A 가 참조하려는 릴레이션의 기본키 B 랑 같은 속성으로 정의될 경우 A를 외래키라함.
  * 외래키로 지정되면 참조 릴레이션의 기본키에 없는 값은 지정 못함 
    * 테이블 A 의 FK  = 테이블 B 의 PK 중 하나

* 데이터 무결성 강화 방법
  * 제약 조건
  * 애플리케이션 추가
  * 데이터베이스 트리거 구현 ( 이벤트 처리 )

### 관계대수 : 원하는 정보를 유도하는 절차적 방법

* 순수 관계 연산자
  * Select : 수평 추출
    * 튜블의 부분집합 구해서 새로운 릴레이션을 만듬 시그마 사용
  * Project : 수직 추출
    * 주어진 릴레이션에서 속성 (칼럼) 을 추출 파이 사용
  * Join
    * 공통 속성을 중심으로 두개의 릴레이션을 하나로 합쳐 새로운 릴레이션을 만듬
    * CARETESIAN PRODUCT 한다음에 SELECT 한것 과 같다.
    * 자연 조인 NATURAL JOIN : 중복된 속성을 제거하고 같은 속성을 한 번만 표기하는 방법
  * Division
    * 두개의 속성을 모두가진 튜플에서 어떤 속성을 제외한 속성만 구하기
    * 교집합 , AND 연산 같은것, 모두와 연관있는 것만 추출
* 일반 집합 연산자
  * UNION 합집합 U
    * 두개 합치고 중복 제거 
  * INTERSECTION 교집합 N
    * 동시에 존재하는거만 추출 AND연산
  * DIFFERENCE 차집합 - 
    * 둘다 가지고 있는 것 제거 
  * CARTESIAN PRODUCT 교차곱  X
    * 모든 순서쌍 OR연산
* **관계 해석** : 원하는 정보를 유도하는 비절차적 특성
  * E.F.CODD가 제안. 데이터 연산 표현 방법, 원하는 정보를 정의할 때 수식으로 나타냄.
  * 비절차적 특성
  * 튜플 관계해석, 도메인 관계해석
  * 질의어로 표현

### 정규화 Nomarlization

* 개요 : 함수의 종속성 이론을 이용하여 잘못 설계된 관계형 스키마를 쪼개서 바람직한 스키마로 만들어 가는 과정
* 목적 : 안정성, 무결성, 효율, 단순화 등등...
  * 종속 관계를 분석하여 하나의 릴레이션을 여러개로 분리하는 과정.
* 이상 (Anomaly) : **데이터의 종속이 아닌 속성 또는 튜플의 종속으로 인해 발생**
  * 삽입 이상 : 데이터 삽입 시 원하지 않은 값도 들어가는 현상
  * 삭제 이상 : 의도와 상관없이 다른 것도 삭제
  * 갱신 이상 : 업데이트 시 일부만 업데이트 되는 현상
* 정규화 원칙
  * 무손실 표현, 정보손실 있으면 안돼
  * 분리의 원칙 - 독립된 관계성은 분리
  * 데이터 중복성 감소
* 정규화 과정 - ***도부이결다조*** ( 명시한 것이 완료되어야 정규형이라고 부른다.)
  1. 제1정규형 : 도메인 to Atomic
  2. 제2정규형 : 부분적 함수 종속 제거
  3. 제3정규형 : 이행적 함수 종속 제거
  4. BCNF  : 결정자가 모두 후보키가 아닌 것 제거 . **복합 속성을 허용한다** 
  5. 제4정규형 : 다치 종속
  6. 제5정규형 : 조인 종속성 이용
* 애트리뷰트 X 에 대하여 다른 애트리뷰트 Y 가 오직 하나만 연관? Y는 X에 함수 종속이다
  * X -> Y : X에의해 Y가 결정된다. 

* 반정규화 = 정규화로 인한 성능 저하 발생 시 일부러 테이블을 통합, 중복, 분리시켜 효율성을 높이는 과정

### 시스템 카탈로그 : 테이블 정보 , 객체 정의, 데이터베이스 ... 

* 의미 : 시스템 그 자체에 관련이 있는 다양한 객체에 관한 정보를 포함하는 시스템 데이터베이스
  * 모든 데이터 객체에 대한 정의나 명세에 관한 정보를 유지 관리
  * 데이터 사전이라고 부른다.
  * Mapping 사상 정보도 저장.
* 메타 데이터 : 카탈로그에 저장된 정보
  * 유형 
    * DB 객체 정보 : 테이블, 인덱스 ,뷰
    * 사용자 정보 : 아이디, 패스워드 ,권한
    * 제약조건 : PK FK NULL
    * Function , Procedure, Trigger 정보
  * 특징
    * 일반 이용자도 SQL로 조회 가능
    * INSERT, DELETE, UPDATE 로 갱신 불가
    * DB에 따라 상이한 구조
    * DBMS 가 **스스로 생성하고 유지**
    * 갱신 : SQL 문으로 테이블에 변화를 주면 자동으로 갱신
    * 분산 시스템 - 위치 투명성 및 중복 투명성 제공을 위해 필요한 모든 제어 정보를 가진다.
* 카탈로그/데이터 사전을 참조하기 위한 DBMS 내의 모듈 시스템
  * DDL Compiler : 정의 번역
  * DML Compiler : 조작어 번역
* Data Directory = **Meta Data** 가 저장되는 곳.
  * 데이터 사전에 수록된 데이터를 실제로 접근하는데 필요한 정보를 관리, 유지
  * 시스템만 접근 가능
* 질의 최적화 Query Optimize : 사용자의 요구를 효율적인 형태로 변환하고 질의를 처리하는 좋은 전략 모색
* 트랜잭션 처리기 : 복수 사용자 환경에서 평행으로 동시에 일어나는 트랜잭션 문제를 해결, 배타적 DB 이용
  * 다수의 사용자, 관리자 가 동시에 이용할 수 있기에 이걸 처리하는 시스템임.





## 2장 물리 데이터베이스 설계

### 트랜색션 처리

* 물리적 설계  : 응답 시간, 저장공간 효율, 트랜잭션 처리도와 관계가 있음
* 개념, 논리, 질의, 예상 이딴거 나오면 다 틀린거임
* 데이터베이스를 구성하는 테이블의 종류
  * 일반 유형 테이블 
  * 클러스터 인덱스 테이블 : 접근 경로 단축시킴
  * 파티셔닝 테이블 : 대용량의 테이블을 ***논리적 단위***로 나눈거
  * 외부 테이블 : 외부 파일을 DB 에 있는 내부 테이블 마냥 쓰는 객체
  * 임시 테이블 
* 트랜섹션 정의 및 특징
  * 한꺼번에 수행되어야 하는 일련의 연산
  * 작업 단위
  * 병행제어, 회복 작업의 논리적 작업 단위
  * 일관성 : 실행 결과가 일관되어야함
  * 격리성 (독립성 ,순차성 ): 병렬 개념은 있는데, 그렇다고 도중에 연산 방해하면서 끼어드는건 안돼  
  * 원자성 :  다 반영되던지 아예 안되던지  - 에러 발생시 아예 취소시키는 거
  * 영속성 (지속성) : 완료된 트랜색션 결과는 시스템이 고장나더라도 반영이 되어야함
* 트랜섹션 분석서 작성
  * 단위 프로세스 , CRUD 연산 , 테이블 참조 횟수 

### 인덱스 설계 | 분포도 작을땐 비트맵 인덱스

* 인덱스는 최대한 적게
* 함수 기반 인덱스 : 시스템 함수를 사용하면 부하가 덜 발생함
* 데이터 변화에 따라 인덱스 변화가 일어날 수 있다.

* 비트맵 인덱스 : 데이터 종류가 적고 동일한 데이터가 많은 경우, 최적의 성능
  * 칼럼, 테이블 수가 적고 튜플이 많은 경우
* 인덱스와 테이블 데이터는 저장공간이 달라야 한답니다.

### 뷰 VIEW | 가상 테이블 

* 접근이 허용된 자료만을 제한적으로 보여주기 위해 유도되어 이름을 가지는 가상 테이블
* 조인문 최소화하여 사용성과 편의성을 최대화
* 하나의 뷰를 삭제하면 그 뷰를 기초로 정의된 뷰도 삭제된다.
* 디스크 공간을 차지 하지 않는다. ( 물리적 공간을 차지하지 않는 가상의 테이블)

### 클러스터 설계 ㅣ 자주 조인, 넓은 분포, CRUD 적음

* 효율 향상을 위해 동일한 성격의 테이블을 동일한 데이터 블록에 저장하는 물리적 저장 방법

* 조회속도는 향상되나, CRUD 성능이 저하된다.

* 데이터 분포도가 넓을수록 유리하다. ( 비트맵 인덱스랑 반대 개념)

* 처리범위가 넓으면 단일 테이블 클러스터링 , 조인이 많이 발생하면 다중 테이블 클러스터링

* ***파티셔닝 된 테이블에서는 사용할 수 없음.***

* 클러스터링 하면 IO 가 줄어듬.

* ***이중화와 클러스터링***

  * 고가용성을 위한 목적
  * 활동-활동 방법 - 에러 발생시 대기하던 곳에서 처리
  * 고가용성 클러스터링? : 하나의 작업을 여러곳에서 처리하는게 아니고 = 병렬처리
    * 하나의 서버에 장애가 발생하면 다른 서버에서 받아서 처리하는 거임.

  

### 파티션 | 논리단위로 나누기

* 대용량의 테이블이나 인덱스를 작은 논리적 단위로 나누는 것
* 데이터 액세스 범위를 줄여 쿼리 성능 향상
* 데이터 분산 저장 - 디스크 성능 향상
* 파티션별 백업 복구 가능, 손상 정도 최소화
* 데이터 가용성 향상, 입 출력 분산
* 세심한 관리, 조인 비용 증가, 용량이 작은걸 파티셔닝하면 성능저하
  * 범위분할 : 날짜범위 분할 - 특정 파티션에 데이터가 집중될 수 있다.
  * 해시 분할 : 특정 key 값에 따른 분할 - 데이터를 고르게 분산한다.
  * 조합 분할 : 파티션 안에 다시 해시로 파티션.
* 인덱스 파티션
  * Local Partition : 테이블 파티션 과 인덱스 파티션이 1:1 대응
  * Global Partition : 테이블 파티션과 인덱스 파티션이 독립적으로 구성



### 분산 데이터베이스 설계

> 비쌈, 위치 의존안함, 사이트 간 오류 발생률 높음, 중복 투명성 보장!!, 

* 정의 : 여러 개의 컴퓨터에 DB 를 분산시킴, 논리적으로는 하나의 시스템
  * 이용이 많은 곳에 데이터베이스를 위치시킨다.
* 구성요소 
  * 분산 처리기 : 지리적 분산 컴퓨터
  * 분산 데이터베이스 : 지리적 분산 데이터베이스
  * 통신 네트워크 : 분산 처리기들을 통신망으로 연결하여 논리적으로 하나의 시스템처럼 작동
* 목표 *** 위치, 중복 ,병행 ,장애 + 투명성 ***
  * 위치 투명성 : 실제 위치 알 필요 없음. 논리적 명칭만 알면 된다.
  * 중복 투명성 : 중복되어 있더라도 마치 하나의 데이터만 존재하는 것처럼 사용
  * 병행 투명성 : 다수의 트랜섹션이 발생하더라도 , 영향을 받지 않도록
  * 장애 투명성 : 각종 장애에도 트랜섹션을 정확하게 처리
* 특징
  * 테이블 위치의 분산 
  * 분할 (Fragment)
    * 완전성 : 전체 데이터를 대상으로 분할해야함
    * 재구성 : 관계연산으로 본래 데이터로 재구성 가능해야함
    * 상호 중첩 배제 : 분할된 데이터가 중첩되어 들어가지 않도록
    * 수평 분할 : 행 단위 ,튜플 단위 분할
    * 수직 분할 : 칼럼, 속성 단위 분할
  * 할당 ( Allocation )
    * 비중복 할당 : 최적의 노드를 선택, 단일 노드에서만 분할이 존재하도록 한다.
    * 중복 할당 : 동일한 테이블을 다른 서버에 복제

### 접근 통제 | 정보커

* 접근통제 3요소 : 접근통제 정책, 보안모델, 메커니즘

  * 매커니즘 : 보안 정책을 구현하는 방법
  * 모델  : 보안정책을 구현하기 위해 정형화된 모델
    * 기밀성 : 인가된 사용자만 접근가능 - 군대같은 특수환경
    * 무결성 : 인가된 사용자만 수정가능 - 데이터의 일관성 유지에 중점

  

### 논리 데이터 모델의 물리 데이터 모델 변환

* 슈퍼타입/서브타입 
  * 슈퍼타입 기준 변환 - 하나의 테이블로 통합
  * 서브타입 기준 변환 - 슈퍼타입 속성을 추가해서 여러개의 테이블로 
  * 개별타입 기준 변환 - 각각을 따로 



### 예상문제 중 정리

* 단일 디스크로 처리할 수 없는 대용량의 데이터를 저장하기 위해 서버와 저장장치를 연결하는 스토리지?
  * NAS, DAS, SAN


